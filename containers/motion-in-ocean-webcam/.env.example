# Motion In Ocean - Webcam Mode Configuration
# Copy this file to .env and adjust as needed for your deployment
#
# RUNTIME MANAGEMENT VIA UI
# Most camera, logging, discovery, and feature flag settings are now exclusively
# managed at runtime through the web UI Settings panel without needing to restart containers.
# See http://localhost:8000/api/settings/schema for available settings.
#
# Environment variables below are for INFRASTRUCTURE CONFIGURATION ONLY and cannot be
# modified via the web UI. Use these for system/deployment concerns.

# Docker Image Tag (version to run)
# Default: latest
MIO_IMAGE_TAG=latest

# Web Server Port
# Default: 8000
MIO_PORT=8000

# Bind Host (address to listen on)
# Default: 127.0.0.1 (localhost only)
# Set to 0.0.0.0 to listen on all interfaces
MIO_BIND_HOST=0.0.0.0

# Timezone
# Default: Europe/London
TZ=Europe/London

# ========== INFRASTRUCTURE CONFIGURATION ==========
# These settings control deployment and system behavior, NOT camera runtime settings.
# To configure camera resolution, FPS, encoding quality, logging, discovery, etc., use the web UI.

# Raspberry Pi 3 Performance Profile
# Set to 'true' if running on Pi 3 for optimizations
# Default: false
MIO_PI3_PROFILE=false

# OctoPrint Compatibility Mode
# Set to 'true' if integrating with OctoPrint
# Default: false
MIO_OCTOPRINT_COMPATIBILITY=false

# CORS Origins (comma-separated list)
# Allowed origins for cross-origin requests
# Default: * (allow all)
MIO_CORS_ORIGINS=*

# Mock Camera Mode (for testing without hardware)
# Set to 'true' to use synthetic camera instead of real hardware
# Default: false
MIO_MOCK_CAMERA=false

# Camera Enumeration Troubleshooting (libcamera/IPA mismatch)
# If you see "RuntimeError: No cameras detected" even with correct device mappings,
# the container's libcamera stack likely does not match the Raspberry Pi OS Bookworm
# pipeline/IPA modules. Rebuild the image with the Raspberry Pi repository packages
# and avoid mounting host /usr/lib or /usr/share/libcamera into the container.

# Cat GIF Mode (MOCK CAMERA ENHANCEMENT)
# Display animated cat GIFs instead of black frames when MIO_MOCK_CAMERA=true
# Useful for visual testing and entertainment
# Default: false
MIO_CAT_GIF=false

# Cat GIF API URL
# The endpoint to fetch cat GIFs from (cataas.com API)
# Default: https://cataas.com/cat/gif
MIO_CATAAS_API_URL=https://cataas.com/cat/gif

# Application Settings Persistence Path
# Where to store persisted UI settings on disk
# Default: /data/application-settings.json
MIO_APPLICATION_SETTINGS_PATH=/data/application-settings.json

# Application Mode
# Valid values: webcam (camera streaming), management (hub/aggregator)
# Default: webcam
MIO_APP_MODE=webcam
MIO_APP_MODE=webcam

# Optional: Bearer token for webcam control-plane protection
# Used by management hub to authenticate requests to this webcam
# Leave empty to disable authentication
MIO_WEBCAM_CONTROL_PLANE_AUTH_TOKEN=

# Optional: Bearer token for management node integration (discovery)
# Required only if this webcam node is registered with a management node
# Leave empty if this node runs standalone
MIO_DISCOVERY_TOKEN=

# Optional: Management hub URL for discovery announcements
# URL that this webcam will announce itself to for registration
# Default: http://127.0.0.1:8001
MIO_DISCOVERY_MANAGEMENT_URL=http://127.0.0.1:8001

# Discovery announcement interval in seconds
# How often this webcam announces itself to management hub when discovery is enabled
# Default: 30
MIO_DISCOVERY_INTERVAL_SECONDS=30

# Optional: Webcam ID for discovery announcements
# Auto-generated as stable hash if not set
# Only set if you need a predictable webcam identifier
MIO_DISCOVERY_WEBCAM_ID=

# Base URL for Discovery Announcements (optional)
# URL that management node will use to reach this webcam
# Set when running on multiple hosts or using custom networking
# Examples:
#  - http://192.168.88.105:8000
#  - http://webcam.local:8000
# Default: auto-detected
MIO_BASE_URL=

# Optional: Bearer token for management node integration
# Required only if this webcam node is registered with a management node
# Leave empty if this node runs standalone
MIO_MANAGEMENT_AUTH_TOKEN=

# ========== SYSTEM CONFIGURATION ==========

# Node Registry Path (internal use)
# Where to store the registry of managed nodes (management mode)
# Default: /data/node-registry.json
MIO_NODE_REGISTRY_PATH=/data/node-registry.json

# Rate Limiter Storage Backend
# Default: memory://
MIO_LIMITER_STORAGE_URI=memory://

# Allow PyKMS Mock Implementation (internal use)
# Default: false
MIO_ALLOW_PYKMS_MOCK=false

# Error Tracking (optional)
# Sentry DSN for error reporting
MIO_SENTRY_DSN=

# Allow Private IPs for SSRF Bypass (management mode)
# Set to 'true' ONLY for internal networks where you trust all node URLs
# WARNING: Enabling this disables SSRF protection for private IP ranges
# Default: false
MIO_ALLOW_PRIVATE_IPS=false
