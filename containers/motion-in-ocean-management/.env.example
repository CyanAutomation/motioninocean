# Motion In Ocean - Management Mode Configuration
# Copy this file to .env and adjust as needed for your deployment
#
# üéõÔ∏è RUNTIME MANAGEMENT VIA UI
# Most logging, discovery, and feature flag settings are now exclusively
# managed at runtime through the web UI Settings panel without needing to restart containers.
# See http://localhost:8001/api/settings/schema for available settings.
#
# Environment variables below are for INFRASTRUCTURE CONFIGURATION ONLY and cannot be
# modified via the web UI. Use these for system/deployment concerns.

# Docker Image Tag (version to run)
# Default: latest
MOTION_IN_OCEAN_IMAGE_TAG=latest

# Web Server Port
# Default: 8001 (to avoid conflict with webcam mode on 8000)
MOTION_IN_OCEAN_PORT=8000

# Bind Host (address to listen on)
# Default: 127.0.0.1 (localhost only)
# Set to 0.0.0.0 to listen on all interfaces (required for remote node discovery)
MOTION_IN_OCEAN_BIND_HOST=0.0.0.0

# Timezone
# Default: Europe/London
TZ=Europe/London

# ========== SECURITY & AUTHENTICATION ==========

# Optional: Bearer token for authentication
# Leave empty to disable authentication (default, suitable for localhost)
# Set to any string to require bearer token auth on protected endpoints
MANAGEMENT_AUTH_TOKEN=

# Node Discovery Shared Secret
# Required for webcam nodes that self-register via /api/discovery/announce.
# Must match DISCOVERY_TOKEN on webcam nodes.
# Leave empty to disable discovery announcements.
NODE_DISCOVERY_SHARED_SECRET=

# SSRF Protection: Allow Private IPs
# SECURITY WARNING: Only enable for internal networks you trust!
# When disabled (default), blocks connections to private IP ranges
# (10.x.x.x, 192.168.x.x, 172.16-31.x.x) to prevent SSRF attacks.
# Recommended: Always use docker network hostnames instead
# Default: false
MOTION_IN_OCEAN_ALLOW_PRIVATE_IPS=false

# ========== NODE REGISTRY & DISCOVERY ==========

# Node Registry Path
# Path to persistent JSON file storing registered node metadata
# Default: /data/node-registry.json
NODE_REGISTRY_PATH=/data/node-registry.json

# Docker Socket Proxy Configuration (for docker transport)
# Only needed if using 'docker' transport for remote node connections
# Default proxy port if using docker-socket-proxy service
DOCKER_PROXY_PORT=2375

# ========== INFRASTRUCTURE CONFIGURATION ==========

# Mock Camera Mode (for testing)
# Set to 'true' to use synthetic camera
# Default: false
MOCK_CAMERA=false

# Camera Runtime Settings (can also be configured via web UI /api/settings)
MOTION_IN_OCEAN_RESOLUTION=640x480
MOTION_IN_OCEAN_FPS=24
MOTION_IN_OCEAN_JPEG_QUALITY=90
MOTION_IN_OCEAN_MAX_STREAM_CONNECTIONS=10
DISCOVERY_ENABLED=false

# Application Settings Persistence Path
# Where to store persisted UI settings on disk
# Default: /data/application-settings.json
APPLICATION_SETTINGS_PATH=/data/application-settings.json

# Rate Limiter Storage Backend
# Default: memory://
LIMITER_STORAGE_URI=memory://

# Allow PyKMS Mock Implementation (internal use)
# Default: false
ALLOW_PYKMS_MOCK=false

# Error Tracking (optional)
# Sentry DSN for error reporting
SENTRY_DSN=

# ========== RUNTIME SETTINGS VIA WEB UI ==========
# The following categories can be configured through the web UI at /api/settings:
#
# 1. LOGGING SETTINGS (logging)
#    - log_level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
#    - log_format (text, json)
#    - log_include_identifiers (true/false)
#
# 2. FEATURE FLAGS (feature_flags)
#    - CORS_SUPPORT, HOME_ASSISTANT_INTEGRATION
#    - PROMETHEUS_METRICS, ENHANCED_FRAME_STATS, REQUEST_TRACING
#    - DEBUG_LOGGING, TRACE_LOGGING, PERFORMANCE_PROFILING, DEVELOPMENT_MODE
#    - ALTERNATIVE_PROTOCOLS
#
# Access the UI at: http://localhost:8001
# View settings schema: http://localhost:8001/api/settings/schema
# Persistent storage: /data/application-settings.json
