# Motion In Ocean - Management Mode Configuration
# Copy this file to .env and adjust as needed for your deployment
#
# RUNTIME MANAGEMENT VIA UI
# Most logging, discovery, and feature flag settings are exclusively
# managed at runtime through the web UI Settings panel without needing to restart containers.
# See http://localhost:8001/api/settings/schema for available settings.
#
# Environment variables below are for INFRASTRUCTURE CONFIGURATION ONLY and cannot be
# modified via the web UI. Use these for system/deployment concerns.

# Docker Image Tag (version to run)
# Default: latest
MIO_IMAGE_TAG=latest

# Web Server Port
# Default: 8001 (to avoid conflict with webcam mode on 8000)
MIO_PORT=8001

# Bind Host (address to listen on)
# Default: 127.0.0.1 (localhost only)
# Set to 0.0.0.0 to listen on all interfaces (required for remote node discovery)
MIO_BIND_HOST=0.0.0.0

# Timezone
# Default: Europe/London
TZ=Europe/London

# Application mode — must be 'management' for this deployment
MIO_APP_MODE=management

# ========== SECURITY & AUTHENTICATION ==========

# Optional: Bearer token for authentication
# Leave empty to disable authentication (default, suitable for localhost)
# Set to any string to require bearer token auth on protected endpoints
MIO_MANAGEMENT_AUTH_TOKEN=

# Node Discovery Shared Secret
# Required for webcam nodes that self-register via /api/discovery/announce.
# Must match MIO_DISCOVERY_TOKEN on webcam nodes.
# Leave empty to disable discovery announcements.
MIO_NODE_DISCOVERY_SHARED_SECRET=

# SSRF Protection: Allow Private IPs
# SECURITY WARNING: Only enable for internal networks you trust!
# When disabled (default), blocks connections to private IP ranges
# (10.x.x.x, 192.168.x.x, 172.16-31.x.x) to prevent SSRF attacks.
# Recommended: Use docker network hostnames instead of private IPs
# Default: false
MIO_ALLOW_PRIVATE_IPS=false

# ========== NODE REGISTRY & DISCOVERY ==========

# Docker Socket Proxy port (for docker transport node connections)
# Only needed if using the docker-socket-proxy service profile
# Default: 2375
MIO_DOCKER_PROXY_PORT=2375

# ========== ERROR TRACKING ==========

# Sentry DSN for error reporting (optional)
# Leave empty to disable
MIO_SENTRY_DSN=

# ========== OPTIONAL OVERRIDES (code defaults shown) ==========
# Uncomment and change only if you need to override the application default.

# Mock camera mode — use synthetic camera instead of real hardware. Default: false
# MIO_MOCK_CAMERA=false

# Node registry persistence path. Default: /data/node-registry.json
# MIO_NODE_REGISTRY_PATH=/data/node-registry.json

# Application settings persistence path. Default: /data/application-settings.json
# MIO_APPLICATION_SETTINGS_PATH=/data/application-settings.json

# Rate limiter storage backend. Default: memory://
# MIO_LIMITER_STORAGE_URI=memory://

# CORS Origins (disabled by default in management mode)
# MIO_CORS_ORIGINS=*
