# Motion In Ocean Camera Configuration
# Copy this file to .env and customize as needed

# ========== IMPORTANT: Variable Semantics ==========
# Empty values vs. 0:
#   - Empty or unset (e.g., MOTION_IN_OCEAN_TARGET_FPS=) → Application decides (often defaults to another variable)
#   - 0 (e.g., MOTION_IN_OCEAN_FPS=0) → Usually means "auto" or "disabled" depending on context
#   See specific variable comments for exact behavior.
#
# Mode-dependent variables:
#   - Healthcheck flags are interpreted differently based on the active profile:
#     * webcam profile uses MOTION_IN_OCEAN_HEALTHCHECK_READY_WEBCAM → /ready endpoint (readiness)
#     * management profile uses MOTION_IN_OCEAN_HEALTHCHECK_READY_MANAGEMENT → /health endpoint (liveness)
#     Set both to true only if both profiles run simultaneously.
#   - Camera settings (RESOLUTION, FPS, etc.) apply only to webcam profile.
#     Management profile does not initialize camera hardware.
# ===================================================

# Docker Image Tag
MOTION_IN_OCEAN_IMAGE_TAG=latest

# Motion In Ocean web interface ports (role-specific)
# Valid range: 1024-65535 (use unprivileged ports 1024+ for security)
# MOTION_IN_OCEAN_WEBCAM_PORT: Used by the 'webcam' profile
MOTION_IN_OCEAN_WEBCAM_PORT=8000
# MOTION_IN_OCEAN_MANAGEMENT_PORT: Used by the 'management' profile (avoids conflicts when both profiles run together)
MOTION_IN_OCEAN_MANAGEMENT_PORT=8001

# Pi 3 profile presets (recommended for Raspberry Pi 3)
# When enabled, missing runtime vars default to:
#   RESOLUTION=640x480, FPS=12, TARGET_FPS=12, JPEG_QUALITY=75, MAX_STREAM_CONNECTIONS=3
# Manual values always win when explicitly set.
# Note: This setting only applies to the 'webcam' profile. Management profile does not use camera settings.
MOTION_IN_OCEAN_PI3_PROFILE=true

# ========== Camera Configuration ==========
# The following settings apply ONLY to the 'webcam' profile.
# Management profile explicitly unsets these variables in docker-compose.yaml.
# See docker-compose.yaml for how each profile handles these settings.
# ==========================================

# Camera Resolution (WIDTHxHEIGHT)
# Common values: 640x480, 1280x720, 1920x1080
# Maximum: 4096x4096 (hardware dependent)
# Hardware-specific recommendations for balanced performance:
#   Pi 3: 1280x720 or 1640x1232 (limited CPU, prioritize lower resolutions)
#   Pi 4: 1920x1080 (good balance of quality and performance)
#   Pi 5: 1920x1080 or 2592x1944 (can handle higher resolutions smoothly)
# Note: Higher resolutions increase CPU usage, memory, and network bandwidth
MOTION_IN_OCEAN_RESOLUTION=640x480

# Frame Rate (FPS) - 0 uses camera default
# Hardware-specific recommendations:
#   Pi 3: 30fps @ 1640x1232, 25fps @ 1920x1080 (CPU-limited, lower FPS for higher resolutions)
#   Pi 4: 30fps @ 1920x1080, up to 60fps @ 1280x720 (better performance, more headroom)
#   Pi 5: 60fps @ 1920x1080, up to 120fps @ 1280x720 (best performance, handles high FPS well)
# Note: Higher FPS increases CPU usage and network bandwidth. Monitor system load.
MOTION_IN_OCEAN_FPS=0

# Target output frame rate throttle (output FPS limiter)
# Empty or unset: Disables throttling; output will follow MOTION_IN_OCEAN_FPS
# 0 (zero): Explicitly disables throttling; output will follow MOTION_IN_OCEAN_FPS
# N (positive integer): Throttles output to N frames per second regardless of capture FPS
# Example: Capture at 60 FPS but output only 10 FPS to save bandwidth: FPS=60, TARGET_FPS=10
MOTION_IN_OCEAN_TARGET_FPS=

# JPEG Quality (1-100)
# Lower values reduce bandwidth but decrease image quality
# 100 is maximum quality (default)
# Set to 80 for a good balance between quality and bandwidth
# Set to 60-70 for bandwidth-constrained networks
MOTION_IN_OCEAN_JPEG_QUALITY=100

# Maximum concurrent clients allowed on /stream.mjpg
# Pi 3 recommendation: 2-3 clients
MOTION_IN_OCEAN_MAX_STREAM_CONNECTIONS=2

# OctoPrint Compatibility Mode
# Enable OctoPrint-compatible webcam routes (/webcam/?action=stream and /webcam/?action=snapshot)
# When disabled (false), use native routes: /stream.mjpg and /snapshot.jpg
# Only enable if you're connecting to OctoPrint
MOTION_IN_OCEAN_OCTOPRINT_COMPATIBILITY=false

# CORS Origins (comma-separated)
# Restricts which origins can access the camera stream from browsers
# ⚠️  WARNING: Using "*" allows ANY website to access your camera stream. Not recommended for production.
# Safe LAN examples:
#   Single origin: http://homeassistant.local:8123
#   Multiple origins: http://homeassistant.local:8123,http://octoprint.local,http://192.168.1.100:3000
# For production or internet-facing deployments, always specify exact origins.
MOTION_IN_OCEAN_CORS_ORIGINS=*

# Mock Camera Mode (for testing without hardware)
# Set to 'true' to use synthetic test patterns instead of real camera
MOCK_CAMERA=false

# Healthcheck configuration (mode-dependent)
# These flags configure which health endpoint is used by Docker healthchecks.
# They are interpreted based on the active compose profile (APP_MODE in container):
#   - webcam profile: true = /ready endpoint (readiness check), false = /health endpoint (liveness check)
#   - management profile: true = /ready endpoint (readiness check), false = /health endpoint (liveness check)
# Note: If both profiles run simultaneously, set both to your desired mode (typically: WEBCAM=true, MANAGEMENT=false)
MOTION_IN_OCEAN_HEALTHCHECK_READY_WEBCAM=true
MOTION_IN_OCEAN_HEALTHCHECK_READY_MANAGEMENT=false

# Timezone (for logging timestamps)
# Format: Region/City (e.g., America/New_York, Europe/London, Asia/Tokyo)
TZ=Europe/London
