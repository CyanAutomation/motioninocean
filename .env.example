# Motion In Ocean Camera Configuration
# Copy this file to .env and customize as needed

# Docker Image Tag
MOTION_IN_OCEAN_IMAGE_TAG=latest

# Application mode
# webcam_node (default): runs camera capture + streaming endpoints for node deployments
# management: management/control plane mode (camera initialization/stream endpoints disabled)
MOTION_IN_OCEAN_APP_MODE=webcam_node

# Motion In Ocean web interface port
# Valid range: 1024-65535 (use unprivileged ports 1024+ for security)
MOTION_IN_OCEAN_PORT=8000

# Pi 3 profile presets (recommended for Raspberry Pi 3)
# When enabled, missing runtime vars default to:
#   RESOLUTION=640x480, FPS=12, TARGET_FPS=12, JPEG_QUALITY=75, MAX_STREAM_CONNECTIONS=3
# Manual values always win when explicitly set.
MOTION_IN_OCEAN_PI3_PROFILE=true

# Camera Resolution (WIDTHxHEIGHT)
# Common values: 640x480, 1280x720, 1920x1080
# Maximum: 4096x4096 (hardware dependent)
# Hardware-specific recommendations for balanced performance:
#   Pi 3: 1280x720 or 1640x1232 (limited CPU, prioritize lower resolutions)
#   Pi 4: 1920x1080 (good balance of quality and performance)
#   Pi 5: 1920x1080 or 2592x1944 (can handle higher resolutions smoothly)
# Note: Higher resolutions increase CPU usage, memory, and network bandwidth
MOTION_IN_OCEAN_RESOLUTION=640x480

# Frame Rate (FPS) - 0 uses camera default
# Hardware-specific recommendations:
#   Pi 3: 30fps @ 1640x1232, 25fps @ 1920x1080 (CPU-limited, lower FPS for higher resolutions)
#   Pi 4: 30fps @ 1920x1080, up to 60fps @ 1280x720 (better performance, more headroom)
#   Pi 5: 60fps @ 1920x1080, up to 120fps @ 1280x720 (best performance, handles high FPS well)
# Note: Higher FPS increases CPU usage and network bandwidth. Monitor system load.
MOTION_IN_OCEAN_FPS=0

# Target output frame rate throttle (0 disables throttling)
# Leave unset/empty to follow MOTION_IN_OCEAN_FPS
MOTION_IN_OCEAN_TARGET_FPS=

# JPEG Quality (1-100)
# Lower values reduce bandwidth but decrease image quality
# 100 is maximum quality (default)
# Set to 80 for a good balance between quality and bandwidth
# Set to 60-70 for bandwidth-constrained networks
MOTION_IN_OCEAN_JPEG_QUALITY=100

# Maximum concurrent clients allowed on /stream.mjpg
# Pi 3 recommendation: 2-3 clients
MOTION_IN_OCEAN_MAX_STREAM_CONNECTIONS=2

# OctoPrint Compatibility Mode
# Enable OctoPrint-compatible webcam routes (/webcam/?action=stream and /webcam/?action=snapshot)
# When disabled (false), use native routes: /stream.mjpg and /snapshot.jpg
# Only enable if you're connecting to OctoPrint
MOTION_IN_OCEAN_OCTOPRINT_COMPATIBILITY=false

# CORS Origins (comma-separated)
# Use to lock down browser access; use "*" to allow all origins
# ⚠️  For production, replace * with specific origins (e.g., http://homeassistant.local:8123)
# Using * allows any website to access your camera stream
MOTION_IN_OCEAN_CORS_ORIGINS=*

# Mock Camera Mode (for testing without hardware)
# Set to 'true' to use synthetic test patterns instead of real camera
MOCK_CAMERA=false

# Healthcheck Ready - set to 'true' when ready for health checks
# Set to 'true' once initial testing is complete and container should report health status.
# When 'false', health checks run but don't affect container state (useful during setup/debugging).
# Enable this for production deployments with orchestrators (Docker Swarm, Kubernetes) that
# rely on health status for automated restarts and traffic routing.
MOTION_IN_OCEAN_HEALTHCHECK_READY=false

# Management mode auth and outbound policy controls
# Require API tokens for write actions on /api/nodes* and /api/nodes/*/actions/*
MOTION_IN_OCEAN_MANAGEMENT_AUTH_REQUIRED=false
# Comma-separated API tokens with write privileges
MOTION_IN_OCEAN_MANAGEMENT_WRITE_API_TOKENS=
# Comma-separated API tokens with admin privileges (required for docker transport operations)
MOTION_IN_OCEAN_MANAGEMENT_ADMIN_API_TOKENS=
# Enable docker socket-backed management operations (default disabled)
MOTION_IN_OCEAN_MANAGEMENT_DOCKER_SOCKET_ENABLED=false
# Comma-separated hostname allowlist for management outbound requests to node base_url values
# Leave empty to disable allowlist enforcement (private/loopback/link-local/metadata hosts are always blocked)
MOTION_IN_OCEAN_MANAGEMENT_OUTBOUND_ALLOWLIST=

# Timezone (for logging timestamps)
# Format: Region/City (e.g., America/New_York, Europe/London, Asia/Tokyo)
TZ=Europe/London
